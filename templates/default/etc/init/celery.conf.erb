# This file is auto generated by chef
# Do no edit in place
description "Celery"
author "Rafael Durán Castañeda <rafadurancastaneda@gmail.com>"
start on runlevel [2345]
stop on runlevel [!2345]
#Send KILL after 20 seconds
kill timeout 20

script
exec su -c "<% if node[:celery][:command] -%><%= node[:celery][:command] %><% else -%>celeryd<% end -%> -l <%= node[:celery][:log_level] %><% if node[:celery][:config_file] -%> --config <%= node[:celery][:config_file] %><% end -%> -f <%= node[:celery][:log_dir] %>/celery.log -c <%= node[:celery][:workers] %> <% if node[:celery][:events] -%>-E <% end -%><% if node[:celery][:beat] -%>-B<% end -%>" <%= node[:celery][:user] %>
end script

respawn
